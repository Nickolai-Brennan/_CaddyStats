Phase 3 – BACKEND CORE (FastAPI + Strawberry GraphQL)
│
├── 3.0 Backend Foundations
│   ├── 3.0.1 Confirm app structure exists
│   │   ├── app/api
│   │   ├── app/graphql
│   │   ├── app/models
│   │   ├── app/services
│   │   ├── app/schemas
│   │   ├── app/auth
│   │   ├── app/middleware
│   │   └── app/utils
│   ├── 3.0.2 Configure settings + env loader
│   │   ├── DATABASE_URL_CONTENT
│   │   ├── DATABASE_URL_STATS
│   │   ├── JWT_SECRET
│   │   ├── CORS_ORIGINS
│   │   └── ENV (dev/prod)
│   ├── 3.0.3 Initialize DB engines + sessions
│   │   ├── content engine/session
│   │   └── stats engine/session
│   ├── 3.0.4 Configure ORM models mapping to Phase 2 tables
│   ├── 3.0.5 Add request logging middleware
│   ├── 3.0.6 Add global exception handler
│   ├── 3.0.7 Add CORS middleware
│   └── 3.0.8 Add health endpoints
│       ├── GET /health
│       └── GET /ready (db connectivity check)
│
├── 3.1 Auth & Security Layer
│   ├── 3.1.1 Implement password hashing utility
│   ├── 3.1.2 Implement JWT token issue + refresh policy
│   ├── 3.1.3 Create auth routes (REST)
│   │   ├── POST /auth/register (optional dev-only)
│   │   ├── POST /auth/login
│   │   ├── POST /auth/refresh
│   │   └── POST /auth/logout (token invalidation strategy)
│   ├── 3.1.4 Implement role-based access control (RBAC)
│   │   ├── admin
│   │   ├── editor
│   │   └── contributor
│   ├── 3.1.5 Build permission decorators/dependencies
│   ├── 3.1.6 Add rate limiting strategy (per IP / per token)
│   ├── 3.1.7 Add audit logging table wiring (writes to content.audit_logs if present)
│   └── 3.1.8 Add security headers (prod)
│       ├── HSTS
│       ├── X-Content-Type-Options
│       └── CSP baseline
│
├── 3.2 GraphQL Content Layer (Strawberry)
│   ├── 3.2.1 Define GraphQL type system
│   │   ├── Post
│   │   ├── Author
│   │   ├── Template
│   │   ├── Tag
│   │   ├── Category
│   │   ├── SeoMeta
│   │   └── User (limited fields)
│   ├── 3.2.2 Define input types (mutations)
│   │   ├── PostCreateInput
│   │   ├── PostUpdateInput
│   │   ├── SeoMetaInput
│   │   └── TemplateInput
│   ├── 3.2.3 Define GraphQL queries
│   │   ├── posts(status, category, tag, author, search, page)
│   │   ├── postBySlug(slug)
│   │   ├── authors(slug, search)
│   │   ├── templates(slug)
│   │   ├── categories
│   │   └── tags
│   ├── 3.2.4 Define GraphQL mutations
│   │   ├── createPost
│   │   ├── updatePost
│   │   ├── deletePost (soft delete)
│   │   ├── publishPost
│   │   ├── unpublishPost
│   │   ├── createTemplate
│   │   ├── updateTemplate
│   │   └── upsertSeoMeta
│   ├── 3.2.5 Implement slug generator service
│   │   ├── normalize title → slug
│   │   ├── check collisions
│   │   └── enforce uniqueness
│   ├── 3.2.6 Implement draft/publish workflow
│   │   ├── status transitions
│   │   ├── published_at assignment
│   │   └── permission rules (editor/admin)
│   ├── 3.2.7 Implement revision tracking
│   │   ├── create revision snapshot on update
│   │   ├── increment version per post
│   │   └── store snapshot_jsonb
│   ├── 3.2.8 Implement tag/category linking
│   │   ├── post_tags sync
│   │   └── post_categories sync
│   ├── 3.2.9 Implement search resolver
│   │   ├── tsvector full-text search
│   │   └── fallback search (title/excerpt)
│   ├── 3.2.10 Add GraphQL auth context
│   │   ├── inject current user
│   │   └── enforce RBAC per resolver
│   └── 3.2.11 Enable GraphQL IDE in dev (playground)
│





├── 3.4 Media + Upload Plumbing (Backend-ready for Editor)
│   ├── 3.4.1 Define upload config (size limits, allowed mime)
│   ├── 3.4.2 Implement POST /api/media/upload
│   │   ├── local storage in dev
│   │   └── S3-compatible adapter later
│   ├── 3.4.3 Implement GET /api/media/list
│   ├── 3.4.4 Implement DELETE /api/media/:id
│   ├── 3.4.5 Write media record to content.media_library
│   └── 3.4.6 Return URL + metadata for editor blocks
│
├── 3.5 Observability & Quality
│   ├── 3.5.1 Standardize API error format
│   │   ├── code
│   │   ├── message
│   │   └── details
│   ├── 3.5.2 Add structured logging (json logs)
│   ├── 3.5.3 Add request ID correlation
│   ├── 3.5.4 Add basic metrics hooks (latency, status counts)
│   ├── 3.5.5 Add SQL query timing logs (dev)
│   └── 3.5.6 Add smoke tests
│       ├── GraphQL createPost → postBySlug
│       ├── REST leaderboard returns rows
│       └── upload endpoint returns URL
│
└── 3.6 Phase 3 Validation Gate
    ├── 3.6.1 Backend boots with Docker + local run
    ├── 3.6.2 /health and /ready are green
    ├── 3.6.3 GraphQL schema introspection succeeds
    ├── 3.6.4 createPost/updatePost/publishPost works
    ├── 3.6.5 Revision created on update
    ├── 3.6.6 Search resolver returns matches
    ├── 3.6.7 REST endpoints return valid JSON
    ├── 3.6.8 RBAC blocks unauthorized mutations
    ├── 3.6.9 Upload endpoint stores media + DB record
    └── 3.6.10 Commit stable “Phase 3 – Backend Ready” checkpoint
